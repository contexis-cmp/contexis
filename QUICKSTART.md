# Quick Start: HR Chatbot with Contexis

This guide creates an HR chatbot that uses a Hugging Face model (`openai/gpt-oss-20b`) and a SQLite-backed vector memory for company policies.

## Prerequisites
- Go 1.21+
- Python 3.10+ (for optional agent tools)
- curl
- Hugging Face account and access token

## 1) Install the CLI
```bash
make install
ctx version
```

## 2) Configure Hugging Face
```bash
export HF_TOKEN=hf_********************************
export HF_MODEL_ID=openai/gpt-oss-20b
```

## 3) Generate the HR agent
```bash
ctx generate agent HRBot --tools database --memory episodic
```
This scaffolds:
- `contexts/HRBot/hrbot.ctx`
- `prompts/HRBot/agent_response.md`
- `memory/HRBot/memory_config.yaml`
- `tools/HRBot/` (includes `database.py`)
- `tests/HRBot/agent_behavior.yaml`

## 4) Prepare company policies
Create a text file with one policy per line. A starter file is provided:
```bash
ls examples/hr-chatbot/policies.txt
```

## 5) Ingest policies into memory (sqlite vector store)
```bash
ctx memory ingest \
  --provider sqlite \
  --component HRBot \
  --model bge-small-en \
  --input examples/hr-chatbot/policies.txt
```
You should see an "ingested version" id.

## 6) Run the server
```bash
ctx serve --addr :8000
```

## 7) Ask a question
```bash
curl -s localhost:8000/api/v1/chat \
  -H 'Content-Type: application/json' \
  -d '{
    "tenant_id": "",
    "context": "HRBot",
    "component": "HRBot",
    "query": "What is our parental leave policy?",
    "top_k": 5,
    "data": {},
    "prompt_file": "agent_response.md"
  }'
```
If `HF_TOKEN` and `HF_MODEL_ID` are set, the response is generated by the Hugging Face model. Otherwise, you will receive the rendered prompt.

## 8) (Optional) Verify memory search
```bash
ctx memory search --provider sqlite --component HRBot --query "parental leave" --top-k 5
```

## 9) (Optional) Multi-tenant isolation
Use tenant-specific memory and contexts with `--tenant TENANT_ID` and header `X-Tenant-ID`.

You now have a working HR chatbot with policy memory and HF inference.
